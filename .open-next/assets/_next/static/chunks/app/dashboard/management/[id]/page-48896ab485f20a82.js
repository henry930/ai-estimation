(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[345],{1847:(e,t,s)=>{"use strict";s.d(t,{A:()=>c});var a=s(2115);let r=e=>{let t=e.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,t,s)=>s?s.toUpperCase():t.toLowerCase());return t.charAt(0).toUpperCase()+t.slice(1)},l=function(){for(var e=arguments.length,t=Array(e),s=0;s<e;s++)t[s]=arguments[s];return t.filter((e,t,s)=>!!e&&""!==e.trim()&&s.indexOf(e)===t).join(" ").trim()};var i={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};let n=(0,a.forwardRef)((e,t)=>{let{color:s="currentColor",size:r=24,strokeWidth:n=2,absoluteStrokeWidth:c,className:d="",children:o,iconNode:h,...x}=e;return(0,a.createElement)("svg",{ref:t,...i,width:r,height:r,stroke:s,strokeWidth:c?24*Number(n)/Number(r):n,className:l("lucide",d),...!o&&!(e=>{for(let t in e)if(t.startsWith("aria-")||"role"===t||"title"===t)return!0})(x)&&{"aria-hidden":"true"},...x},[...h.map(e=>{let[t,s]=e;return(0,a.createElement)(t,s)}),...Array.isArray(o)?o:[o]])}),c=(e,t)=>{let s=(0,a.forwardRef)((s,i)=>{let{className:c,...d}=s;return(0,a.createElement)(n,{ref:i,iconNode:t,className:l("lucide-".concat(r(e).replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase()),"lucide-".concat(e),c),...d})});return s.displayName=r(e),s}},6132:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});let a=(0,s(1847).A)("circle-alert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]])},6715:(e,t,s)=>{Promise.resolve().then(s.bind(s,7398))},6983:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});let a=(0,s(1847).A)("clock",[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]])},7398:(e,t,s)=>{"use strict";s.d(t,{default:()=>p});var a=s(5155),r=s(2115),l=s(1847);let i=(0,l.A)("file-text",[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);var n=s(6132);let c=(0,l.A)("link",[["path",{d:"M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71",key:"1cjeqo"}],["path",{d:"M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71",key:"19qd67"}]]),d=(0,l.A)("square-check-big",[["path",{d:"M21 10.656V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h12.344",key:"2acyp4"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]),o=(0,l.A)("chevron-left",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);var h=s(9332),x=s(6983),m=s(2619),u=s.n(m);function p(e){let{taskId:t}=e,[s,l]=(0,r.useState)(null),[m,p]=(0,r.useState)(!0),[b,g]=(0,r.useState)("description");(0,r.useEffect)(()=>{(async()=>{try{let e=await fetch("/api/admin/tasks/".concat(t)),s=await e.json();s.success&&l(s.data)}catch(e){console.error("Failed to fetch task:",e)}finally{p(!1)}})()},[t]);let y=async(e,s)=>{try{let a=await fetch("/api/admin/tasks/".concat(t,"/subtasks"),{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({subtaskId:e,isCompleted:!s})});(await a.json()).success&&l(t=>t?{...t,subtasks:t.subtasks.map(t=>t.id===e?{...t,isCompleted:!s}:t)}:null)}catch(e){console.error("Failed to toggle subtask:",e)}},w=async e=>{if(e.trim())try{let s=await fetch("/api/admin/tasks/".concat(t,"/subtasks"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({title:e})}),a=await s.json();a.success&&l(e=>e?{...e,subtasks:[...e.subtasks,a.data]}:null)}catch(e){console.error("Failed to create subtask:",e)}};if(m)return(0,a.jsx)("div",{className:"flex items-center justify-center min-h-[400px]",children:(0,a.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-500"})});if(!s)return(0,a.jsxs)("div",{className:"p-8 text-center bg-white/5 rounded-2xl border border-white/10",children:[(0,a.jsx)("p",{className:"text-gray-400",children:"Task not found"}),(0,a.jsx)(u(),{href:"/dashboard/management",className:"text-blue-400 text-sm mt-4 inline-block hover:underline",children:"Back to Management"})]});let f=[{id:"description",label:"Description",icon:i},{id:"issues",label:"Issues",icon:n.A},{id:"documents",label:"Documents",icon:c},{id:"todo",label:"To Do",icon:d}];return(0,a.jsxs)("div",{className:"max-w-5xl mx-auto space-y-6",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex items-center gap-4",children:[(0,a.jsx)(u(),{href:"/dashboard/management",className:"p-2 hover:bg-white/5 rounded-xl transition-all border border-transparent hover:border-white/10",children:(0,a.jsx)(o,{className:"w-5 h-5 text-gray-400"})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h1",{className:"text-2xl font-bold text-white tracking-tight",children:s.title}),(0,a.jsxs)("div",{className:"flex items-center gap-3 mt-1 text-xs",children:[(0,a.jsxs)("span",{className:"text-gray-500",children:["ID: ",s.id.slice(0,8)]}),(0,a.jsx)("span",{className:"w-1 h-1 rounded-full bg-white/10"}),(0,a.jsxs)("div",{className:"flex items-center gap-1.5 text-blue-400/80 font-mono",children:[(0,a.jsx)(h.A,{className:"w-3.5 h-3.5"}),s.branch||"no-branch"]}),(0,a.jsx)("span",{className:"w-1 h-1 rounded-full bg-white/10"}),(0,a.jsxs)("div",{className:"flex items-center gap-1.5 text-gray-500",children:[(0,a.jsx)(x.A,{className:"w-3.5 h-3.5"}),s.hours||0,"h"]})]})]})]}),(0,a.jsx)("div",{className:"px-4 py-1.5 rounded-full text-xs font-bold border ".concat("DONE"===s.status?"bg-green-500/10 text-green-500 border-green-500/20":"IN PROGRESS"===s.status?"bg-blue-500/10 text-blue-400 border-blue-500/20":"bg-white/5 text-gray-400 border-white/10"),children:s.status})]}),(0,a.jsx)("div",{className:"flex items-center gap-1 p-1 bg-white/5 rounded-xl border border-white/10 w-fit",children:f.map(e=>(0,a.jsxs)("button",{onClick:()=>g(e.id),className:"flex items-center gap-2 px-4 py-2 rounded-lg text-sm font-medium transition-all ".concat(b===e.id?"bg-white/10 text-white shadow-lg":"text-gray-500 hover:text-gray-300 hover:bg-white/[0.02]"),children:[(0,a.jsx)(e.icon,{className:"w-4 h-4"}),e.label]},e.id))}),(0,a.jsxs)("div",{className:"bg-[#0a0a0a] border border-white/5 rounded-2xl p-8 min-h-[400px] shadow-2xl",children:["description"===b&&(0,a.jsxs)("div",{className:"prose prose-invert max-w-none",children:[(0,a.jsx)("h3",{className:"text-white text-lg font-semibold mb-4",children:"Task Description"}),(0,a.jsx)("p",{className:"text-gray-400 leading-relaxed whitespace-pre-wrap",children:s.description||"No description provided."}),s.aiPrompt&&(0,a.jsxs)("div",{className:"mt-8 p-4 bg-blue-500/5 border border-blue-500/10 rounded-xl",children:[(0,a.jsx)("h4",{className:"text-xs font-bold text-blue-400 uppercase tracking-widest mb-2",children:"AI Context"}),(0,a.jsxs)("p",{className:"text-sm text-blue-300/80 italic",children:['"',s.aiPrompt,'"']})]})]}),"issues"===b&&(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsx)("h3",{className:"text-white text-lg font-semibold mb-6",children:"Identified Refinements & Issues"}),s.issues?(0,a.jsx)("div",{className:"space-y-3",children:s.issues.split("\n").filter(e=>e.trim()).map((e,t)=>(0,a.jsxs)("div",{className:"flex gap-4 p-4 bg-white/[0.02] border border-white/5 rounded-xl hover:border-white/10 transition-all",children:[(0,a.jsx)(n.A,{className:"w-5 h-5 text-orange-500/60 shrink-0"}),(0,a.jsx)("p",{className:"text-gray-300 text-sm leading-relaxed",children:e.replace(/- \[.\]/,"").trim()})]},t))}):(0,a.jsx)("div",{className:"text-center py-12 text-gray-600 italic",children:"No specific issues identified."})]}),"documents"===b&&(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsx)("h3",{className:"text-white text-lg font-semibold mb-6",children:"Related Documentation"}),s.documents&&s.documents.length>0?(0,a.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:s.documents.map(e=>(0,a.jsxs)("a",{href:e.url,target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-4 p-4 bg-white/[0.02] border border-white/5 rounded-xl hover:bg-white/[0.05] hover:border-white/20 transition-all group",children:[(0,a.jsx)("div",{className:"p-2 bg-blue-500/10 rounded-lg group-hover:bg-blue-500/20 transition-all",children:(0,a.jsx)(c,{className:"w-5 h-5 text-blue-400"})}),(0,a.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,a.jsx)("p",{className:"text-sm font-medium text-white truncate",children:e.title}),(0,a.jsx)("p",{className:"text-[10px] text-gray-500 truncate",children:e.url})]})]},e.id))}):(0,a.jsx)("div",{className:"text-center py-12 text-gray-600 italic",children:"No documents attached."})]}),"todo"===b&&(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,a.jsx)("h3",{className:"text-white text-lg font-semibold",children:"Task Breakdown"}),(0,a.jsxs)("div",{className:"text-xs text-gray-500",children:[s.subtasks.filter(e=>e.isCompleted).length," / ",s.subtasks.length," Completed"]})]}),(0,a.jsxs)("div",{className:"mb-6 relative",children:[(0,a.jsx)("input",{type:"text",placeholder:"Add a new sub-task...",className:"w-full bg-white/5 border border-white/10 rounded-xl px-4 py-3 text-sm text-white focus:outline-none focus:border-blue-500/50 transition-all pr-12",onKeyDown:e=>{"Enter"===e.key&&(w(e.currentTarget.value),e.currentTarget.value="")}}),(0,a.jsx)("div",{className:"absolute right-4 top-3.5 text-[10px] text-gray-600 font-mono",children:"ENTER"})]}),s.subtasks&&s.subtasks.length>0?(0,a.jsx)("div",{className:"space-y-2",children:s.subtasks.map(e=>(0,a.jsxs)("button",{onClick:()=>y(e.id,e.isCompleted),className:"w-full flex items-center gap-4 p-4 bg-white/[0.02] border border-white/5 rounded-xl group hover:bg-white/[0.04] hover:border-white/10 transition-all text-left",children:[(0,a.jsx)("div",{className:"p-1 rounded border transition-all ".concat(e.isCompleted?"bg-green-500 border-green-500 text-white":"bg-white/5 border-white/10 text-transparent group-hover:text-gray-600"),children:(0,a.jsx)(d,{className:"w-4 h-4"})}),(0,a.jsx)("span",{className:"text-sm transition-all ".concat(e.isCompleted?"text-gray-500 line-through":"text-gray-200"),children:e.title})]},e.id))}):(0,a.jsx)("div",{className:"text-center py-12 text-gray-600 italic",children:"No sub-tasks defined."})]})]})]})}},9332:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});let a=(0,s(1847).A)("git-branch",[["line",{x1:"6",x2:"6",y1:"3",y2:"15",key:"17qcm7"}],["circle",{cx:"18",cy:"6",r:"3",key:"1h7g24"}],["circle",{cx:"6",cy:"18",r:"3",key:"fqmcym"}],["path",{d:"M18 9a9 9 0 0 1-9 9",key:"n2h4wq"}]])}},e=>{e.O(0,[2619,8441,1255,7358],()=>e(e.s=6715)),_N_E=e.O()}]);