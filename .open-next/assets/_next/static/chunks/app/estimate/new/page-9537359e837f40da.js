(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2372],{309:(e,t,r)=>{Promise.resolve().then(r.bind(r,2099))},2099:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>f});var s=r(5155),n=r(2115),a=r(63),o=r(4078);function l(e){let{children:t,sidebar:r}=e;return(0,s.jsxs)("div",{className:"flex h-screen bg-[#050505] text-white overflow-hidden",children:[(0,s.jsx)(o.A,{}),(0,s.jsx)("div",{className:"flex-1 flex flex-col pl-64 h-full relative",children:t}),r&&(0,s.jsx)("div",{className:"w-80 border-l border-white/10 bg-black h-full hidden xl:block",children:r})]})}var i=r(856),c=r(7662);function d(e){let{messages:t}=e,r=(0,n.useRef)(null);return(0,n.useEffect)(()=>{var e;null==(e=r.current)||e.scrollIntoView({behavior:"smooth"})},[t]),(0,s.jsxs)("div",{className:"flex-1 overflow-y-auto p-8 space-y-8 scrollbar-thin scrollbar-thumb-white/10",children:[t.map(e=>(0,s.jsx)("div",{className:"flex w-full ".concat("user"===e.role?"justify-end":"justify-start"),children:(0,s.jsxs)("div",{className:"max-w-[90%] rounded-3xl px-6 py-4 transition-all duration-300 ".concat("user"===e.role?"bg-blue-600 text-white rounded-br-sm shadow-lg shadow-blue-900/20":"assistant"===e.role?"bg-[#121212] text-gray-200 border border-white/10 rounded-bl-sm shadow-xl":"bg-transparent text-gray-500 text-sm justify-center w-full text-center border-none shadow-none"),children:["system"!==e.role&&(0,s.jsx)("div",{className:"text-[10px] uppercase tracking-widest font-bold mb-3 ".concat("user"===e.role?"text-blue-200/60":"text-purple-400/60"),children:"user"===e.role?"User":"AI Architect"}),(0,s.jsx)("div",{className:"prose prose-invert prose-sm max-w-none leading-relaxed prose-headings:font-bold prose-headings:text-white prose-p:text-gray-300 prose-strong:text-white prose-code:text-blue-400 prose-pre:bg-black/50 prose-pre:border prose-pre:border-white/5",children:(0,s.jsx)(i.oz,{children:e.content})}),"estimation"===e.type&&e.data&&(0,s.jsxs)("div",{className:"mt-8 pt-8 border-t border-white/10",children:[(0,s.jsx)("h4",{className:"text-sm font-semibold mb-4 text-white",children:"Visual Task Breakdown"}),(0,s.jsx)("div",{className:"bg-black/20 rounded-2xl border border-white/5 p-4 overflow-hidden",children:(0,s.jsx)(c.A,{categories:e.data})})]})]})},e.id)),(0,s.jsx)("div",{ref:r})]})}function h(e){let{onSend:t}=e,[r,a]=(0,n.useState)(""),o=(0,n.useRef)(null),l=e=>{null==e||e.preventDefault(),r.trim()&&(t(r),a(""),o.current&&(o.current.style.height="auto"))};return(0,s.jsxs)("div",{className:"p-6 border-t border-white/10 bg-[#050505]",children:[(0,s.jsxs)("div",{className:"max-w-4xl mx-auto relative flex items-end gap-3 p-3 bg-[#111] rounded-xl border border-white/10 focus-within:border-white/20 transition-colors shadow-lg shadow-black/50",children:[(0,s.jsx)("button",{className:"p-2 text-gray-400 hover:text-white transition-colors rounded-lg hover:bg-white/5",children:(0,s.jsx)(x,{})}),(0,s.jsx)("textarea",{ref:o,value:r,onChange:e=>{a(e.target.value),e.target.style.height="auto",e.target.style.height="".concat(Math.min(e.target.scrollHeight,200),"px")},onKeyDown:e=>{"Enter"!==e.key||e.shiftKey||(e.preventDefault(),l())},placeholder:"Describe your project requirements...",className:"flex-1 bg-transparent border-none focus:ring-0 text-white placeholder-gray-500 resize-none max-h-[200px] py-2.5",rows:1,style:{minHeight:"44px"}}),(0,s.jsx)("button",{onClick:()=>l(),disabled:!r.trim(),className:"p-2 bg-blue-600 text-white rounded-lg hover:bg-blue-500 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:(0,s.jsx)(u,{})})]}),(0,s.jsx)("div",{className:"text-center mt-3 text-xs text-gray-600",children:"AI can make mistakes. Please verify important information."})]})}function x(){return(0,s.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"w-5 h-5",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m18.375 12.739-7.693 7.693a4.5 4.5 0 0 1-6.364-6.364l10.94-10.94A3 3 0 1 1 19.5 7.372L8.552 18.32m.009-.01-.01.01m5.699-9.941-7.81 7.81a1.5 1.5 0 0 0 2.112 2.13"})})}function u(){return(0,s.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:2,stroke:"currentColor",className:"w-5 h-5",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M4.5 10.5 12 3m0 0 7.5 7.5M12 3v18"})})}function m(e){let{githubUrl:t,onConnectRepo:r}=e;return(0,s.jsxs)("div",{className:"h-full flex flex-col bg-black text-white",children:[(0,s.jsx)("div",{className:"p-6 border-b border-white/10",children:(0,s.jsx)("h3",{className:"font-semibold text-lg",children:"Estimation Context"})}),(0,s.jsxs)("div",{className:"flex-1 overflow-y-auto p-6 space-y-8",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("h4",{className:"text-xs font-bold text-gray-500 uppercase mb-4 tracking-widest",children:"Target Repository"}),t?(0,s.jsxs)("div",{className:"p-4 rounded-xl bg-blue-500/5 border border-blue-500/20 flex items-center gap-3 group",children:[(0,s.jsx)(b,{}),(0,s.jsxs)("div",{className:"min-w-0",children:[(0,s.jsx)("div",{className:"text-sm font-medium text-blue-400 truncate",children:t.split("/").slice(-2).join("/")}),(0,s.jsx)("div",{className:"text-[10px] text-gray-500",children:"Connected"})]})]}):(0,s.jsxs)("button",{onClick:r,className:"w-full py-4 px-4 rounded-xl border border-dashed border-white/10 text-sm text-gray-400 hover:text-white hover:border-white/30 hover:bg-white/5 transition-all flex flex-col items-center justify-center gap-3 group",children:[(0,s.jsx)("div",{className:"p-2 rounded-full bg-white/5 group-hover:bg-white/10 transition-colors",children:(0,s.jsx)(g,{})}),(0,s.jsx)("span",{children:"Connect Repository"})]})]}),(0,s.jsxs)("div",{className:"p-4 rounded-xl bg-orange-500/5 border border-orange-500/20",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2 mb-2 text-orange-400",children:[(0,s.jsx)(p,{}),(0,s.jsx)("span",{className:"text-sm font-semibold",children:"Pro Tip"})]}),(0,s.jsx)("p",{className:"text-xs text-orange-400/70 leading-relaxed",children:"Connecting a repository allows the AI to analyze existing code patterns and generate more accurate task breakdowns."})]})]})]})}function p(){return(0,s.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:2,stroke:"currentColor",className:"w-4 h-4",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m11.25 11.25.041-.02a.75.75 0 0 1 1.063.852l-.708 2.836a.75.75 0 0 0 1.063.853l.041-.021M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Zm-9-3.75h.008v.008H12V8.25Z"})})}function b(){return(0,s.jsx)("svg",{className:"w-5 h-5 text-white/50",fill:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{d:"M12 0c-6.626 0-12 5.373-12 12 0 5.302 3.438 9.8 8.207 11.387.599.111.793-.261.793-.577v-2.234c-3.338.726-4.033-1.416-4.033-1.416-.546-1.387-1.333-1.756-1.333-1.756-1.089-.745.083-.729.083-.729 1.205.084 1.839 1.237 1.839 1.237 1.07 1.834 2.807 1.304 3.492.997.107-.775.418-1.305.762-1.604-2.665-.305-5.467-1.334-5.467-5.931 0-1.311.469-2.381 1.236-3.221-.124-.303-.535-1.524.117-3.176 0 0 1.008-.322 3.301 1.23.957-.266 1.983-.399 3.003-.404 1.02.005 2.047.138 3.006.404 2.291-1.552 3.297-1.23 3.297-1.23.653 1.653.242 2.874.118 3.176.77.84 1.235 1.911 1.235 3.221 0 4.609-2.807 5.624-5.479 5.921.43.372.823 1.102.823 2.222v3.293c0 .319.192.694.801.576 4.765-1.589 8.199-6.086 8.199-11.386 0-6.627-5.373-12-12-12z"})})}function g(){return(0,s.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"w-4 h-4",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 4.5v15m7.5-7.5h-15"})})}var w=r(9936);function j(){let e=(0,a.useSearchParams)();(0,a.useRouter)();let t=e.get("projectId"),[r,o]=(0,n.useState)(null),[i,c]=(0,n.useState)(!1),[x,u]=(0,n.useState)([{id:"1",role:"assistant",content:"Hello! I'm your AI Estimation Architect. \n\nTell me about the project you'd like to build. The more details you provide about features, technologies, and target users, the more accurate my estimation will be.",timestamp:new Date}]),[p,b]=(0,n.useState)(!1);(0,n.useEffect)(()=>{t&&fetch("/api/projects/".concat(t)).then(e=>e.json()).then(e=>o(e)).catch(e=>console.error("Failed to fetch project:",e))},[t]);let g=async e=>{if(!t)return void alert("No project ID found. Please start from a project page.");let r={id:Date.now().toString(),role:"user",content:e,timestamp:new Date};u(e=>[...e,r]),b(!0);try{let r=await fetch("/api/estimate/create",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({requirements:e,projectId:t})});if(!r.ok){let e=await r.json();throw Error(e.message||"Failed to generate estimation")}let s=await r.json(),n=(JSON.parse(s.estimation.tasks)||[]).map((e,t)=>({id:(t+1).toString(),title:e.name,tasks:e.tasks.map((e,r)=>({id:"".concat(t,"-").concat(r),title:e.name,description:e.description,hours:e.hours,completed:!1,branch:null}))})),a={id:(Date.now()+1).toString(),role:"assistant",type:"estimation",data:n,content:"### Estimation Generated! \n\n".concat(s.summary,"\n\n**Total Hours:** ").concat(s.estimation.totalHours,"h\n**Recommended Stack:** ").concat(s.recommendedStack.join(", "),"\n\nI've saved this estimation to your project. You can view the details back on the project page."),timestamp:new Date};u(e=>[...e,a])}catch(t){let e={id:(Date.now()+1).toString(),role:"assistant",content:"Sorry, I encountered an error: ".concat(t.message,". Please try again."),timestamp:new Date};u(t=>[...t,e])}finally{b(!1)}};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(l,{sidebar:(0,s.jsx)(m,{githubUrl:null==r?void 0:r.githubUrl,onConnectRepo:()=>c(!0)}),children:(0,s.jsxs)("div",{className:"flex-1 flex flex-col min-h-0",children:[(0,s.jsx)(d,{messages:x}),p&&(0,s.jsx)("div",{className:"px-6 py-4 text-sm text-gray-500 italic",children:"AI is thinking..."}),(0,s.jsx)(h,{onSend:g})]})}),i&&(0,s.jsx)(w.A,{onProjectCreated:()=>{t&&fetch("/api/projects/".concat(t)).then(e=>e.json()).then(e=>o(e))},onClose:()=>c(!1)})]})}function f(){return(0,s.jsx)(n.Suspense,{fallback:(0,s.jsx)("div",{className:"flex items-center justify-center h-screen bg-[#050505]",children:(0,s.jsx)("div",{className:"w-8 h-8 border-2 border-blue-500 border-t-transparent rounded-full animate-spin"})}),children:(0,s.jsx)(j,{})})}},7662:(e,t,r)=>{"use strict";r.d(t,{A:()=>n});var s=r(5155);function n(e){let{categories:t,onBranchClick:r}=e;return t&&0!==t.length?(0,s.jsx)("div",{className:"space-y-8",children:t.map(e=>(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsxs)("h3",{className:"text-lg font-semibold text-gray-200 border-b border-white/10 pb-2 flex justify-between items-center",children:[e.title,(0,s.jsxs)("span",{className:"text-xs font-normal text-gray-500",children:[e.tasks.reduce((e,t)=>e+t.hours,0)," hours"]})]}),(0,s.jsx)("div",{className:"space-y-3",children:e.tasks.map(e=>(0,s.jsxs)("div",{className:"group flex items-start gap-4 p-3 rounded-xl hover:bg-white/5 transition-all border border-transparent hover:border-white/5",children:[(0,s.jsx)("div",{className:"mt-1 w-5 h-5 rounded border flex items-center justify-center shrink-0 ".concat(e.completed?"bg-blue-500 border-blue-500":"border-white/20"),children:e.completed&&(0,s.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",className:"w-3.5 h-3.5 text-white",children:(0,s.jsx)("path",{fillRule:"evenodd",d:"M16.704 4.153a.75.75 0 0 1 .143 1.052l-8 10.5a.75.75 0 0 1-1.127.075l-4.5-4.5a.75.75 0 0 1 1.06-1.06l3.894 3.893 7.48-9.817a.75.75 0 0 1 1.05-.143Z",clipRule:"evenodd"})})}),(0,s.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between gap-2",children:[(0,s.jsx)("h4",{className:"text-sm font-medium transition-colors ".concat(e.completed?"text-gray-500 line-through":"text-gray-300 group-hover:text-white"),children:e.title}),(0,s.jsxs)("span",{className:"text-xs text-gray-500 whitespace-nowrap",children:[e.hours,"h"]})]}),e.branch&&(0,s.jsxs)("button",{onClick:()=>null==r?void 0:r(e.branch),className:"mt-1 text-[10px] bg-blue-500/10 text-blue-400 border border-blue-500/20 px-2 py-0.5 rounded hover:bg-blue-500/20 transition-all font-mono",children:["Branch: ",e.branch]})]})]},e.id))})]},e.id))}):(0,s.jsx)("div",{className:"text-center py-20 border-2 border-dashed border-white/5 rounded-xl",children:(0,s.jsx)("p",{className:"text-gray-500",children:"No tasks defined for this project."})})}}},e=>{e.O(0,[6489,2619,701,211,8441,1255,7358],()=>e(e.s=309)),_N_E=e.O()}]);