# Dashboard UI for Hierarchical Structure

## Overview

The dashboard displays the hierarchical structure of tasks, issues, and documents in an intuitive, navigable interface.

## UI Layout

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  AI Estimation System                          [User] [Credits] â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚          â”‚  Project: AI Estimation System                       â”‚
â”‚ Projects â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”‚  â”‚ Description â”‚ Issues â”‚ Documents â”‚ Tasks      â”‚ â”‚
â”‚ > My AI  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚   Estim. â”‚                                                       â”‚
â”‚          â”‚  â”Œâ”€ Tasks â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚ Settings â”‚  â”‚                                               â”‚   â”‚
â”‚          â”‚  â”‚ Phase 3: Frontend Development        [60%]   â”‚   â”‚
â”‚ Usage    â”‚  â”‚ â”œâ”€ Dashboard Core (IN PROGRESS)     [0%]     â”‚   â”‚
â”‚          â”‚  â”‚ â”‚  â”œâ”€ ğŸ“‹ Unified Interface (PENDING)         â”‚   â”‚
â”‚          â”‚  â”‚ â”‚  â”‚  â”œâ”€ ğŸ› 2 issues                         â”‚   â”‚
â”‚          â”‚  â”‚ â”‚  â”‚  â””â”€ ğŸ“„ 1 document                       â”‚   â”‚
â”‚          â”‚  â”‚ â”‚  â”œâ”€ ğŸ“‹ Nested Task List (PENDING)          â”‚   â”‚
â”‚          â”‚  â”‚ â”‚  â”‚  â”œâ”€ ğŸ› 1 issue                          â”‚   â”‚
â”‚          â”‚  â”‚ â”‚  â”‚  â””â”€ ğŸ“„ 2 documents                      â”‚   â”‚
â”‚          â”‚  â”‚ â”‚  â””â”€ ğŸ“‹ GitHub Connection (PENDING)         â”‚   â”‚
â”‚          â”‚  â”‚ â”‚     â””â”€ ğŸ› 1 issue                          â”‚   â”‚
â”‚          â”‚  â”‚ â”œâ”€ Chat Experience (IN PROGRESS)    [0%]     â”‚   â”‚
â”‚          â”‚  â”‚ â”‚  â”œâ”€ ğŸ“‹ SSE Streaming (PENDING)             â”‚   â”‚
â”‚          â”‚  â”‚ â”‚  â””â”€ ğŸ“‹ Chat Input (PENDING)                â”‚   â”‚
â”‚          â”‚  â”‚ â””â”€ Mockup Consolidation (DONE)     [100%]    â”‚   â”‚
â”‚          â”‚  â”‚                                               â”‚   â”‚
â”‚          â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚          â”‚                                                       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## Component Breakdown

### 1. Nested Task Tree

**Features:**
- Expandable/collapsible nodes
- Visual indentation for hierarchy
- Status badges (PENDING, IN PROGRESS, DONE)
- Progress bars at each level
- Issue and document counts
- Click to navigate to detail view

```tsx
interface TaskTreeNode {
  id: string;
  name: string;
  status: TaskStatus;
  progress: number;
  branch?: string;
  issueCount: number;
  documentCount: number;
  children: TaskTreeNode[];
  level: number;
}

function TaskTree({ node, level = 0 }: { node: TaskTreeNode; level?: number }) {
  const [expanded, setExpanded] = useState(true);
  
  return (
    <div style={{ paddingLeft: `${level * 20}px` }}>
      <div className="task-row">
        {node.children.length > 0 && (
          <button onClick={() => setExpanded(!expanded)}>
            {expanded ? 'â–¼' : 'â–¶'}
          </button>
        )}
        
        <span className="task-icon">
          {level === 0 ? 'ğŸ“' : 'ğŸ“‹'}
        </span>
        
        <Link to={`/tasks/${node.id}`}>{node.name}</Link>
        
        <StatusBadge status={node.status} />
        
        <ProgressBar value={node.progress} />
        
        {node.issueCount > 0 && (
          <span className="issue-count">ğŸ› {node.issueCount}</span>
        )}
        
        {node.documentCount > 0 && (
          <span className="doc-count">ğŸ“„ {node.documentCount}</span>
        )}
      </div>
      
      {expanded && node.children.map(child => (
        <TaskTree key={child.id} node={child} level={level + 1} />
      ))}
    </div>
  );
}
```

### 2. Task Detail View (Unified Interface)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Dashboard Core                                   [Edit]    â”‚
â”‚  feature/dashboard-v2                                       â”‚
â”‚  Parent: Phase 3 Frontend > Dashboard Core                 â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  [Description] [Issues (5)] [Documents (3)] [Sub-Tasks (8)]â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                             â”‚
â”‚  ## Sub-Tasks                                               â”‚
â”‚                                                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ Task                    Status    Hours  Branch     â”‚   â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤   â”‚
â”‚  â”‚ Unified Interface       PENDING   6      feature/.. â”‚   â”‚
â”‚  â”‚ â”œâ”€ ğŸ› Layout Issue                                  â”‚   â”‚
â”‚  â”‚ â””â”€ ğŸ“„ API Spec                                      â”‚   â”‚
â”‚  â”‚ Nested Task List        PENDING   8      feature/.. â”‚   â”‚
â”‚  â”‚ â””â”€ ğŸ› Performance                                   â”‚   â”‚
â”‚  â”‚ GitHub Connection       PENDING   4      feature/.. â”‚   â”‚
â”‚  â”‚ ...                                                 â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 3. Issues Tab (Nested Display)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Issues (5)                                    [+ New Issue]â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                             â”‚
â”‚  ğŸ› Credit Deduction Race Condition              [OPEN]    â”‚
â”‚     â””â”€ ğŸ› Implement atomic credit check         [OPEN]    â”‚
â”‚     â””â”€ ğŸ› Add rollback mechanism                [OPEN]    â”‚
â”‚                                                             â”‚
â”‚  ğŸ› Nested Task Hierarchy Display                [OPEN]    â”‚
â”‚     â””â”€ ğŸ› Deep nesting performance              [OPEN]    â”‚
â”‚                                                             â”‚
â”‚  Sub-task Issues:                                           â”‚
â”‚  â”œâ”€ Unified Interface/                                      â”‚
â”‚  â”‚  â””â”€ ğŸ› Layout responsiveness                 [OPEN]    â”‚
â”‚  â””â”€ Nested Task List/                                       â”‚
â”‚     â””â”€ ğŸ› Rendering optimization                [OPEN]    â”‚
â”‚                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 4. Documents Tab (Nested Display)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Documents (3)                              [+ New Document]â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                             â”‚
â”‚  ğŸ“ Task-level Documents                                    â”‚
â”‚  â”œâ”€ ğŸ“„ Dashboard Architecture                              â”‚
â”‚  â”œâ”€ ğŸ“„ Data Model Specification                            â”‚
â”‚  â””â”€ ğŸ“„ Credit System Design                                â”‚
â”‚                                                             â”‚
â”‚  ğŸ“ Sub-task Documents                                      â”‚
â”‚  â”œâ”€ Unified Interface/                                      â”‚
â”‚  â”‚  â”œâ”€ ğŸ“„ Component API Specification                      â”‚
â”‚  â”‚  â””â”€ ğŸ“„ Design Mockups                                   â”‚
â”‚  â”œâ”€ Nested Task List/                                       â”‚
â”‚  â”‚  â””â”€ ğŸ“„ Rendering Optimization Guide                     â”‚
â”‚  â””â”€ GitHub Connection/                                      â”‚
â”‚     â””â”€ ğŸ“„ OAuth Integration Flow                           â”‚
â”‚                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## Data Flow

### Loading Task with Hierarchy

```typescript
// API Route: /api/tasks/[id]
export async function GET(req: Request, { params }: { params: { id: string } }) {
  const task = await prisma.task.findUnique({
    where: { id: params.id },
    include: {
      parent: true,
      children: {
        include: {
          issues: true,
          documents: true,
          children: true // Nested children
        }
      },
      issues: {
        include: {
          children: true // Nested issues
        }
      },
      documents: {
        include: {
          children: true // Nested documents
        }
      },
      phase: true
    }
  });
  
  return Response.json(task);
}
```

### Rendering Recursive Tree

```typescript
function buildTaskTree(tasks: Task[]): TaskTreeNode[] {
  const taskMap = new Map<string, TaskTreeNode>();
  const rootTasks: TaskTreeNode[] = [];
  
  // First pass: create all nodes
  tasks.forEach(task => {
    taskMap.set(task.id, {
      ...task,
      children: [],
      issueCount: task.issues.length,
      documentCount: task.documents.length,
      progress: calculateProgress(task)
    });
  });
  
  // Second pass: build hierarchy
  tasks.forEach(task => {
    const node = taskMap.get(task.id)!;
    if (task.parentId) {
      const parent = taskMap.get(task.parentId);
      parent?.children.push(node);
    } else {
      rootTasks.push(node);
    }
  });
  
  return rootTasks;
}
```

## Interactive Features

### 1. Drag & Drop Reordering

```typescript
function onDragEnd(result: DropResult) {
  if (!result.destination) return;
  
  const items = Array.from(tasks);
  const [reordered] = items.splice(result.source.index, 1);
  items.splice(result.destination.index, 0, reordered);
  
  // Update order in database
  await updateTaskOrder(items.map((item, index) => ({
    id: item.id,
    order: index
  })));
}
```

### 2. Inline Editing

```typescript
function TaskRow({ task }: { task: Task }) {
  const [editing, setEditing] = useState(false);
  
  if (editing) {
    return (
      <input
        value={task.name}
        onChange={(e) => updateTask(task.id, { name: e.target.value })}
        onBlur={() => setEditing(false)}
      />
    );
  }
  
  return (
    <span onDoubleClick={() => setEditing(true)}>
      {task.name}
    </span>
  );
}
```

### 3. Breadcrumb Navigation

```typescript
function TaskBreadcrumb({ taskId }: { taskId: string }) {
  const breadcrumbs = useBreadcrumbs(taskId);
  
  return (
    <nav className="breadcrumb">
      {breadcrumbs.map((item, index) => (
        <React.Fragment key={item.id}>
          <Link to={`/tasks/${item.id}`}>{item.name}</Link>
          {index < breadcrumbs.length - 1 && <span> &gt; </span>}
        </React.Fragment>
      ))}
    </nav>
  );
}

function useBreadcrumbs(taskId: string) {
  const [breadcrumbs, setBreadcrumbs] = useState<Task[]>([]);
  
  useEffect(() => {
    async function loadBreadcrumbs() {
      const path = await fetch(`/api/tasks/${taskId}/breadcrumbs`).then(r => r.json());
      setBreadcrumbs(path);
    }
    loadBreadcrumbs();
  }, [taskId]);
  
  return breadcrumbs;
}
```

## Visual Indicators

### Status Colors

- `PENDING` - Gray (#6B7280)
- `IN_PROGRESS` - Blue (#3B82F6)
- `WAITING_FOR_REVIEW` - Yellow (#F59E0B)
- `DONE` - Green (#10B981)

### Icons

- ğŸ“ Phase/Task Group
- ğŸ“‹ Task
- ğŸ› Issue
- ğŸ“„ Document
- âœ… Completed
- â³ In Progress
- ğŸ‘¤ Assignee

## Mobile Responsive

```tsx
function ResponsiveTaskView() {
  const isMobile = useMediaQuery('(max-width: 768px)');
  
  if (isMobile) {
    return <TaskCardView />; // Card-based layout
  }
  
  return <TaskTreeView />; // Tree layout
}
```

This creates a complete dashboard UI that mirrors the hierarchical structure in the database and files.
